## 1. 운영체제 Operation System

: 컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 모든 **소프트웨어와 하드웨어를 연결**하는 소프트웨어 계층

- 좁은 의미(**커널**) : 운영체제의 핵심 부분으로 메모리에 상주하는 부분
- 넓은 의미 : 커널 뿐만 아니라 각종 주변 시스템 유틸리티를 포함한 개념
- 목적 : 컴퓨터 시스템의 자원(하드웨어, 소프트웨어 모두)을 효율적으로 관리하는 것
    - 프로세서, 기억장치, 입출력 장치 등의 효율적 관리
    - 사용자 간의 형평성 있는 자원 분배
    - 사용자 및 운영체제 자신의 보호
    

### 1.1. 운영 체제의 분류

- 동시 작업 여부 : 단일 작업, 다중 작업
- 사용자 수: 단일 사용자, 다중 사용자
- 처리 방식 :
    - 일괄처리(batch processing)
        - 작업 요청을 일정량 모아 한꺼번에 처리
        - 작업이 완전 종료될 때까지 기다려야 함
    - **시분할(time sharing)**
        - 여러 작업을 수행할 때 컴퓨터 처리 능력을 일정한 시간 단위로 분할하여 사용
        - 일괄 처리에 비해 짧은 응답 시간
        - INTERACTIVE
    - 실시간(real time)
        - **정해진 시간 안에 어떠한 일이 반드시 종료**됨이 보장되어야 하는 실시간 시스템을 위한 OS
        - 시분할과의 차이 : 시분할은 시간을 분할해 할당하지만 그 시간이 정해진 것은 아님.
        - 원자로/공장 제어, 미사일 제어 등
        - 실시간 시스템 개념 확장
            - Hard realtime system 경성 실시간 시스템 : 원자로 제어, 미사일 제어 등
            - Soft realtime system 연성 실시간 시스템 : hard realtime system만큼 deadline이 엄격하지 않으나 realtime으로 진행되는 시스템
- 용어
    1. multitasking
    2. multiprogramming
        
        : 메모리에 여러 프로그램이 동시에 올라가야 하는 것. multitasking보다 메모리 측면을 강조
        
    3. time sharing
        
        : cpu강조. cpu가 시간을 분할하여 나누어쓴다는 의미.
        
    4. multiprocess
    
    1~4는 컴퓨터에서 여러 작업을 동시에 수행하는 것을 의미함
    
    1. multiprocessor : 하나의 컴퓨터에 CPU가 여러개 붙어 있음을 의미
    

### 1.2. 운영 체제의 예

- 유닉스 UNIX
    - multitasking 지원
    - 높은 이식성
    - 코드를 대부분 **C언어**로 작성 - 기계어와 가까운 C언어 개발 후 이를 이용해 운영체제 만듦
    - 복잡한 시스템에 맞게 확장 용이
    - **소스 코드 공개**
    - 프로그램 개발에 용이
    - 다양한 버전 - System V, FreeBSD, SunOS, Solaris, Linux
- DOS(Disk Operation System)
    - MS사에서 개인용 컴퓨터를 위해 개발
    - 단일 사용자용 운영체제, 메모리 관리 능력의 한계(주 기억장치 640kb)
- MS Windows
    - MS사의 다중 작업용 GUI 기반 운영 체제
    - DOS용 응용 프로그램과 호환성 제공
    - 불안정성(초기 모델)
    - 풍부한 지원 소프트웨어

### 1.3. 운영 체제의 구조

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/b1f97dea-c4d4-435b-8524-386503a11889/c648f70f-2ffe-4082-b1d9-0dfbcfe4af5a/Untitled.png)

- CPU 스케줄링: 순서대로 ㄴㄴ. 가장 효율적으로!
- 메모리 관리 : 더 자주 쓰는 것 중심으로.
- 파일 관리

### 1.4. 컴퓨터 시스템 구조

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/b1f97dea-c4d4-435b-8524-386503a11889/bc58eb66-c46d-446c-b3c6-3516a4bc7b3f/Untitled.png)

***Computer***

- CPU : 매 clock cycle마다 memory의 instruction 읽고 실행 반복
    - register : 메모리보다 빠르고 정보를 저장할 수 있는 작은 공간
    - modebit : 지금 CPU에서 실행되는 게 사용자 프로그램인지 운영체제인지 구분해주는 역할
        
        :  0일 때 - 운영체제가 CPU 소유
        
        모든 instruction 실행 가능
        
         : 1일 때 - 사용자 프로그램이 CPU 소유
        
        - 한정된 instruction만 실행 가능
        - 사용자 프로그램은 IO Device 직접 접근 불가. 운영체계에게 CPU 넘기고, 운영체제가 해당 작업 IO장치에게 시킴
    - interrupt line
        
        : CPU는 메모리만 읽어오며, 메모리와만 일함. 다른 device들과 일해야 하는 경우, CPU가 직접 일하는 것이 아니라 device controller에게 지시. device controller는 device에게 작업 시키고 이 결과를 cpu에게 반환(==interrupt)
        
- Memory : CPU의 작업 공간
    - memory controller
    - 원칙적으로 CPU만 접근 가능
- DMA*direct memory access* controller : 직접 메모리에 접근 가능한 컨트롤러
    - CPU가 interrupt 너무 많이 받으면 효율성이 떨어지기 때문에,  DMA 가 로컬 버퍼에 있는 내용 복사까지 하고 CPU에 전달한뒤 interrupt 한 번만 걺
    - 원칙적으로는 Memory CPU만 접근 가능하나 Memory 접근 가능한 dma가 IO 장치의 끝난 일을 memory에 복사해서 올리기까지 완료함. 이후 cpu에게 작업 끝났다고 interrupt
- timer : 특정 프로그램의 CPU 독점을 막음. 각 프로그램은 timer에 지정된 시간이 지나면 timer intterupt를 통해 CPU 제어권 운영체제에 넘김.

***I/O device :*** 별개의 device들. 

- Disk
- local buffer : device controller를 위한 각각의 작업 공간
- device controller : 각 I/O Device마다 붙어 작은 cpu 역할(하드웨어)
    - 제어 정보를 위해 control register, status register를 가짐(데이터 자체는 로컬 버퍼에 저장, 명령은 컨트롤 레지스터에서)
    - local buffer를 가짐
    - I/O는 실제 device와 local buffer 사이에서 일어남
    - Device controller는 I/O가 끝났을 경우 interrupt로 CPU에 그 사실을 알림
    
    ↔ device driver(소프트웨어) : 각 장치별 처리 루틴. 각 장치에 접근하기 위한 프로그램.
    

### 1.5. I/O의 수행과 이해

- 입출력(I/O)의 수행
    - 모든 입출력 명령은 특권 명령
    - 사용자 프로그램은 어떻게 I/O 하는가?
        - system call : 운영체제에게 부탁
        - trap을 사용하여 인터럽트 벡터의 특정 위치로 이동
        - 제어권이 인터럽트 벡터가 가리키는 인터럽트 서비스 루틴으로 이동
        - 올바른 IO 요청인지 확인 후 IO 수행
- Interrupt 인터럽트
    - 넓은 의미 :
        1. Interrupt : 하드웨어가 발생시킨 인터럽트(일반적으로 사용하는 의미)
        2. Trap : 소프트웨어 인터럽트
        - 인터럽트 벡터 : 해당 이너터럽트의 처리 루틴 주소를 갖고 있음
        - 인터럽트 처리 루틴 interrupt Service Routine(인터럽트 핸들러) : 해당 인터럽트를 처리하는 커널 함수